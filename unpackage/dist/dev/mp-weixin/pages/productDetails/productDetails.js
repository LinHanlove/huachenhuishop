(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/productDetails/productDetails"],{202:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var r=o(n(203));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},203:function(t,e,n){"use strict";n.r(e);var o=n(204),r=n(206);for(var s in r)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(s);n(208);var i,u=n(32),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);c.options.__file="pages/productDetails/productDetails.vue",e["default"]=c.exports},204:function(t,e,n){"use strict";n.r(e);var o=n(205);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},205:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return i})),n.d(e,"recyclableRender",(function(){return s})),n.d(e,"components",(function(){return o}));try{o={uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,276))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-parse/u-parse")]).then(n.bind(null,317))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,326))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.gallery.map((function(t){return t.img_url}))),o=t.gallery.length;t._isMounted||(t.e0=function(e){t.show=!0}),t.$mp.data=Object.assign({},{$root:{g0:n,g1:o}})},s=!1,i=[];r._withStripped=!0},206:function(t,e,n){"use strict";n.r(e);var o=n(207),r=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=r.a},207:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(59)),s=o(n(61)),i=o(n(11)),u=n(169),c=n(35);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={data:function(){return{ShowErrorText:"请选择规格",goods_id:0,current:0,show:!1,isShowError:!1,gallery:[],info:[],productList:[],specificationList:[],specsStatus:!1,specsSwitchValue:"",specsValue:"",selnumValue:1,shopListNum:0,showCustomerService:!1,goodsCount:0}},onLoad:function(t){this.goods_id=t.id},methods:l(l({},(0,c.mapMutations)(["SET_GOODSLIST"])),{},{goodsDetail:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n,o,s,i,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getGoodsDetail)({id:t.goods_id});case 2:n=e.sent,o=n.gallery,s=n.info,i=n.productList,c=n.specificationList,t.gallery=o,t.info=s,t.productList=i,t.specificationList=c,t.specsSwitchValue="已选择:".concat(c.valueList.find((function(t,e){return 0===e})).value),t.getGoodsCount();case 13:case"end":return e.stop()}}),e)})))()},getGoodsCount:function(){var t=this;return(0,s.default)(r.default.mark((function e(){var n,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getGoodsCount)();case 2:n=e.sent,o=n.cartTotal.goodsCount,t.goodsCount=o,t.SET_GOODSLIST(o);case 6:case"end":return e.stop()}}),e)})))()},setCurrent:function(t){this.current=t.current},close:function(){this.show=!1},specsSwitch:function(t){0===this.info.goods_number?t===this.specsValue?(this.specsSwitchValue="请选择规格和数量",this.specsValue="",this.specsStatus=!1):(this.specsSwitchValue="已选择:".concat(t),this.specsValue=t,this.specsStatus=!0,this.showError("库存不足")):t===this.specsValue?(this.specsValue="",this.specsSwitchValue="请选择规格和数量",this.specsStatus=!1):(this.specsValue=t,this.specsStatus=!0,this.specsSwitchValue="已选择:".concat(t))},cutSelnum:function(){this.selnumValue--,this.selnumValue<0&&(this.selnumValue=0),0===this.selnumValue&&(this.specsStatus=!1)},addSelnum:function(){this.selnumValue++,this.selnumValue>0&&(this.specsStatus=!0)},toIndex:function(){t.switchTab({url:"/pages/index/index"})},confirm:function(){this.showCustomerService=!1},showError:function(t){var e=this;this.ShowErrorText=t,this.isShowError=!0;var n=setTimeout((function(){e.isShowError=!1,clearTimeout(n)}),2e3)},CartAdd:function(){var e=this,n=this.productList.find((function(t,e){return 0===e})).goods_id.toString(),o=this.productList.find((function(t,e){return 0===e})).id;this.specsStatus?(t.showToast({icon:"loading",title:"正在添加",duration:2e3}),(0,u.setCartAdd)({addType:0,goodsId:n,number:this.selnumValue,productId:o}).then((function(){var n=setTimeout((function(){t.showToast({icon:"success",title:"添加成功",duration:2e3}),clearTimeout(n)}),1e3);e.getGoodsCount()}))):this.showError("请选择规格")},buyNow:function(){this.specsStatus?(this.CartAdd(),t.navigateTo({url:"/pages/confirmAnOrder/confirmAnOrder?id=".concat(this.info.id)})):this.showError("请选择规格"),this.show=!0},toShoppingCart:function(){t.switchTab({url:"/pages/ShoppingCart/ShoppingCart"})}}),onShow:function(){this.goodsDetail()}};e.default=d}).call(this,n(2)["default"])},208:function(t,e,n){"use strict";n.r(e);var o=n(209),r=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=r.a},209:function(t,e,n){}},[[202,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/productDetails/productDetails.js.map